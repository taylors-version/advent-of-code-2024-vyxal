ᶲƛme[m2÷|'x}n⌊Y}fᵛᶲ ##Convert input to block form
{:₳J}"x\d"R| ##Check whether it ends in x's
:λLv¥ṚλK}Ḟh-n'xḞ;}Ė  ##stack has coords at top, then blocks under
£:¥hi#= :¥tQ¥hvQ ¥t#$Ị}
⌊Þι∑